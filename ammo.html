<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ë–æ—î–ø—Ä–∏–ø–∞—Å–∏ ‚Äì –ó–∞—Å–æ–±–∏ —É—Ä–∞–∂–µ–Ω–Ω—è</title>

<style>
    :root {
        --bg-main: #020204;
        --bg-card: #0b0b0f;
        --accent: #ff2727;
        --accent-soft: #ff5757;
        --border-glow: 0 0 18px rgba(255, 39, 39, 0.7);
        --text-main: #f5f5f5;
        --text-muted: #b8b8b8;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: "Segoe UI", system-ui, -apple-system, sans-serif;
        background: radial-gradient(circle at top, #220000 0%, #020204 45%, #000000 100%);
        color: var(--text-main);
        overflow-x: hidden;
    }

    a {
        color: inherit;
        text-decoration: none;
    }

   /* ===== –ì–õ–û–ë–ê–õ–¨–ù–ò–ô HUD (—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –¥–ª—è –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–æ–∫) ===== */
.hud-nav {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 50;
    backdrop-filter: blur(10px);
    background: linear-gradient(90deg, rgba(0,0,0,0.94), rgba(40,0,0,0.9));
    border-bottom: 1px solid rgba(255, 39, 39, 0.5);
    box-shadow: 0 0 20px rgba(255,39,39,0.4);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 14px;
}

.hud-logo {
    display: flex;
    align-items: center;
    gap: 6px; /* —Ç—ñ–ª—å–∫–∏ –º–∞–ª–µ–Ω—å–∫–∏–π –≤—ñ–¥—Å—Ç—É–ø */
    cursor: pointer;
}
.hud-logo-main {
    font-size: 15px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: #ff5757;
}
.hud-logo-sub {
    font-size: 11px;
    color: #b8b8b8;
}

.hud-burger {
    width: 32px;
    height: 32px;
    border-radius: 999px;
    border: 1px solid rgba(255,39,39,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 15px rgba(255,39,39,0.7);
}
.hud-burger span {
    position: relative;
    width: 18px;
    height: 2px;
    background: #ff2727;
    border-radius: 999px;
    transition: 0.25s;
}
.hud-burger::before,
.hud-burger::after {
    content: "";
    position: absolute;
    width: 18px;
    height: 2px;
    background: #ff2727;
    border-radius: 999px;
    transition: 0.25s;
}
.hud-burger::before { transform: translateY(-6px); }
.hud-burger::after { transform: translateY(6px); }
.hud-burger.active span { opacity: 0; }
.hud-burger.active::before { transform: rotate(45deg); }
.hud-burger.active::after { transform: rotate(-45deg); }

/* MENU */
.hud-menu {
    position: fixed;
    top: 50px;
    right: 10px;
    z-index: 40;
    width: 220px;
    max-width: calc(100% - 20px);
    background: radial-gradient(circle at top, #3b0000 0%, #050507 45%, #000 100%);
    border-radius: 14px;
    border: 1px solid rgba(255,39,39,0.7);
    box-shadow: 0 0 28px rgba(255,39,39,0.7);
    padding: 12px;
    opacity: 0;
    transform: translateY(-10px) scale(0.97);
    pointer-events: none;
    transition: 0.22s ease;
}

.hud-menu.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

.hud-menu-groups { display: flex; flex-direction: column; gap: 10px; }

.menu-group { border-top: 1px solid rgba(255,39,39,0.25); padding-top: 6px; }

.menu-group-title {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #b8b8b8;
    margin: 4px 2px;
}

.hud-menu ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.hud-menu li button {
    width: 100%;
    background: linear-gradient(90deg, #150000, #2a0000);
    color: #fff;
    border-radius: 9px;
    padding: 7px 10px;
    border: 1px solid rgba(255,39,39,0.7);
    font-size: 13px;
    text-align: left;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: 0.18s;
}

.hud-menu li button:hover {
    background: linear-gradient(90deg, #360000, #550000);
    box-shadow: 0 0 18px rgba(255,39,39,0.8);
}
.hud-back {
    font-size: 18px;
    color: var(--accent-soft);
    cursor: pointer;
    padding: 3px 8px;
    border-radius: 6px;
    border: 1px solid rgba(255,39,39,0.5);
    background: rgba(20,0,0,0.6);
    box-shadow: 0 0 6px rgba(255,39,39,0.4);
    transition: 0.2s;
}

.hud-back:hover {
    background: rgba(40,0,0,0.9);
    color: #fff;
    box-shadow: 0 0 12px rgba(255,39,39,1);
}
    /* HERO */
    .hero {
        margin-top: 52px;
        position: relative;
        padding: 70px 18px 30px;
        overflow: hidden;
    }

    .hero-inner {
        position: relative;
        z-index: 2;
        max-width: 900px;
        margin: 0 auto;
    }

    .hero-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: var(--accent-soft);
        padding: 4px 9px;
        border-radius: 999px;
        border: 1px solid rgba(255,39,39,0.7);
        background: rgba(0,0,0,0.8);
        box-shadow: var(--border-glow);
        margin-bottom: 14px;
    }

    .hero-title {
        font-size: 24px;
        text-transform: uppercase;
        text-shadow: 0 0 18px rgba(255,39,39,0.9);
        margin-bottom: 8px;
    }

    .hero-sub {
        font-size: 14px;
        color: var(--text-muted);
        margin-bottom: 20px;
    }

    /* –ü–û–®–£–ö */
    .search-box {
        margin-top: 10px;
        margin-bottom: 22px;
        width: 100%;
        max-width: 420px;
        position: relative;
        z-index: 50;
    }

    .search-box input {
        width: 100%;
        padding: 10px 42px 10px 16px;
        border-radius: 999px;
        background: rgba(10,10,12,0.85);
        border: 1px solid rgba(255,39,39,0.6);
        color: var(--text-main);
        font-size: 14px;
        outline: none;
        box-shadow: 0 0 12px rgba(255,39,39,0.5);
        transition: 0.2s;
    }

    .search-box input::placeholder {
        color: var(--text-muted);
    }

    .search-box input:focus {
        background: rgba(18,0,0,0.9);
        border-color: var(--accent);
        box-shadow: 0 0 18px rgba(255,39,39,0.9);
    }

    .search-icon {
        position: absolute;
        right: 14px;
        top: 9px;
        font-size: 18px;
        color: var(--accent-soft);
        pointer-events: none;
        text-shadow: 0 0 8px rgba(255,39,39,0.8);
    }

    .search-dropdown {
        position: absolute;
        top: calc(100% + 6px);
        left: 0;
        width: 100%;
        max-width: 420px;
        background: rgba(10,10,12,0.95);
        border: 1px solid rgba(255,39,39,0.6);
        border-radius: 12px;
        padding: 6px 0;
        box-shadow: 0 0 20px rgba(255,39,39,0.7);
        backdrop-filter: blur(10px);
        display: none;
        z-index: 5000;
    }

    .search-item {
        padding: 10px 14px;
        cursor: pointer;
        color: var(--text-main);
        font-size: 14px;
        border-bottom: 1px solid rgba(255,39,39,0.2);
        transition: 0.2s;
    }

    .search-item:hover {
        background: rgba(255,39,39,0.2);
        padding-left: 20px;
    }

    .no-results {
        margin-top: 12px;
        padding: 10px 14px;
        border-radius: 10px;
        background: rgba(40,0,0,0.55);
        border: 1px solid rgba(255,39,39,0.5);
        color: var(--accent-soft);
        font-size: 14px;
        display: none;
        box-shadow: 0 0 16px rgba(255,39,39,0.35);
        text-align: center;
    }

    mark {
        background: rgba(255,39,39,0.35);
        color: #fff;
        padding: 0 2px;
        border-radius: 4px;
    }

    /* –ö–ê–†–¢–ö–ò */
    section.page {
        max-width: 1100px;
        margin: 0 auto 40px;
        padding: 0 16px 30px;
    }

    .cards-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
    }

    .weapon-card {
        width: 110px;
        background: var(--bg-card);
        border-radius: 10px;
        border: 1px solid rgba(255, 39, 39, 0.5);
        box-shadow: 0 0 10px rgba(255, 39, 39, 0.4);
        overflow: hidden;
        text-align: center;
        cursor: pointer;
        transition: 0.25s ease;
    }

    .weapon-card:hover {
        transform: scale(1.05);
        box-shadow: 0 0 18px rgba(255,39,39,1);
    }

    .weapon-image {
        width: 100%;
        height: 100px;
        object-fit: cover;
        border-bottom: 1px solid rgba(255,39,39,0.3);
    }

    .weapon-body {
        padding: 4px 2px;
    }

    .weapon-name {
        font-size: 11px;
        font-weight: 600;
        color: #ff5757;
        line-height: 1.2;
    }

    @media (max-width: 480px) {
        .weapon-card {
            width: calc(33.33% - 12px);
        }
        .weapon-image {
            height: 90px;
        }
        .weapon-name {
            font-size: 10px;
        }
    }

    footer {
        text-align: center;
        padding: 10px 0 30px;
        font-size: 13px;
        color: var(--text-muted);
    }

    footer a {
        color: var(--accent-soft);
        text-decoration: none;
        font-weight: 600;
        transition: 0.2s;
    }

    footer a:hover {
        color: var(--accent);
        text-shadow: 0 0 8px rgba(255, 39, 39, 0.7);
    }

    /* –ú–û–î–ê–õ–ö–ê */
    .weapon-modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.85);
        backdrop-filter: blur(8px);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: 0.3s ease;
    }

    .weapon-modal.hidden {
        opacity: 0;
        pointer-events: none;
    }

    .weapon-modal-content {
        width: 92%;
        max-width: 520px;
        height: 82vh;
        background: #0b0b0f;
        border: 1px solid rgba(255, 39, 39, 0.7);
        border-radius: 18px;
        padding: 14px;
        box-shadow: 0 0 35px rgba(255,0,0,0.7);
        display: flex;
        flex-direction: column;
        position: relative;
        animation: modalAppear 0.25s ease-out;
    }

    @keyframes modalAppear {
        from { transform: scale(0.8); opacity: 0; }
        to   { transform: scale(1); opacity: 1; }
    }

    .modal-close {
        position: absolute;
        top: 10px;
        right: 12px;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 1px solid rgba(255,39,39,0.6);
        background: rgba(10, 0, 0, 0.85);
        color: #ff5757;
        font-size: 18px;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(255,39,39,0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: 0.2s ease;
    }

    .modal-close:hover {
        background: rgba(40, 0, 0, 1);
        color: #fff;
        box-shadow: 0 0 15px rgba(255,0,0,1);
        transform: scale(1.15);
    }

    .modal-img-wrapper {
        width: 100%;
        height: 38vh;
        background: #000;
        border-radius: 12px;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        border: 1px solid rgba(255, 39, 39, 0.5);
    }

    .modal-img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: #000;
    }

    .modal-scroll {
        margin-top: 14px;
        flex: 1;
        overflow-y: auto;
        padding-right: 8px;
    }

    .modal-scroll::-webkit-scrollbar {
        width: 7px;
    }

    .modal-scroll::-webkit-scrollbar-thumb {
        background: rgba(255,39,39,0.6);
        border-radius: 5px;
    }

    .modal-scroll::-webkit-scrollbar-track {
        background: rgba(60,0,0,0.4);
    }

    .weapon-modal h2 {
        font-size: 20px;
        color: #ffffff;
        margin-bottom: 6px;
    }

    .modal-range {
        font-size: 14px;
        color: #bbbbbb;
        margin-bottom: 12px;
    }

    .modal-desc {
        font-size: 15px;
        line-height: 1.5;
        color: #e5e5e5;
    }

    /* info-block */
    .info-block {
        position: relative;
        margin-bottom: 18px;
        padding: 16px 18px;
        background: rgba(10, 0, 0, 0.55);
        border: 1px solid rgba(255, 40, 40, 0.35);
        border-radius: 12px;
        box-shadow:
            0 0 12px rgba(255,0,0,0.25),
            inset 0 0 18px rgba(255,0,0,0.15);
        backdrop-filter: blur(6px);
        overflow: hidden;
    }

    .info-block::before {
        content: "";
        position: absolute;
        top: 0;
        left: 14px;
        width: 60%;
        height: 2px;
        background: linear-gradient(90deg, rgba(255,60,60,0.8), transparent);
    }

    .info-block h3 {
        position: relative;
        display: inline-block;
        padding: 4px 10px;
        background: rgba(40,0,0,0.8);
        border-left: 3px solid #ff2727;
        border-radius: 4px 8px 8px 4px;
        text-transform: uppercase;
        font-size: 14px;
        letter-spacing: 0.8px;
        color: #ff5757;
        margin-bottom: 10px;
        text-shadow: 0 0 8px rgba(255,50,50,0.9);
    }

    .info-block h3::before {
        content: "‚óÜ";
        font-size: 10px;
        margin-right: 6px;
        color: #ff2727;
    }

    .info-block p,
    .info-block li {
        font-size: 14px;
        line-height: 1.6;
        color: #e5e5e5;
    }

    .info-block ul {
        margin-top: 8px;
        margin-left: 14px;
    }

    .info-block ul li {
        margin-bottom: 5px;
        padding-left: 6px;
        position: relative;
    }

    .info-block ul li::before {
        content: "‚ñ∏";
        position: absolute;
        left: -10px;
        color: #ff2727;
        font-size: 12px;
    }
</style>
</head>
<body>

<!-- –ú–û–î–ê–õ–ö–ê -->
<div id="weaponModal" class="weapon-modal hidden">
    <div class="weapon-modal-content">

        <button class="modal-close">
            ‚úñ
        </button>

        <div class="modal-img-wrapper">
            <img id="modalImg" class="modal-img" alt="">
        </div>

        <div class="modal-scroll">
          <h2 id="modalName"></h2>

          <div class="info-block">
              <h3>–û–ü–ò–°</h3>
              <p id="modalDesc"></p>
          </div>

          <div class="info-block">
              <h3>–•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò</h3>
              <ul id="modalSpecs"></ul>
          </div>
        </div>
    </div>
</div>

<!-- HUD –ù–ê–í–Ü–ì–ê–¶–Ü–Ø -->
<div class="hud-nav">
<div class="hud-logo" id="homeLink">
    <span class="hud-back" id="backBtn">‚Üê</span>
    <div>
        <div class="hud-logo-main">–ó–∞—Å–æ–±–∏ —É—Ä–∞–∂–µ–Ω–Ω—è</div>
        <div class="hud-logo-sub">–ë–æ—î–ø—Ä–∏–ø–∞—Å–∏</div>
    </div>
</div>


    <div class="hud-burger" id="hudBurger">
        <span></span>
    </div>
</div>
   
<div class="hud-menu" id="hudMenu">
    <div class="hud-menu-groups">

        <div class="menu-group">
            <div class="menu-group-title">–û—Å–Ω–æ–≤–Ω–µ</div>
            <ul>
                <li><button data-link="index.html">–ì–æ–ª–æ–≤–Ω–∞</button></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="menu-group-title">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –æ–∑–±—Ä–æ—î–Ω–Ω—è</div>
            <ul>
                <li><button data-link="ammo.html">–ë–æ—î–ø—Ä–∏–ø–∞—Å–∏</button></li>
                <li><button data-link="rockets.html">–†–∞–∫–µ—Ç–Ω—ñ –∫–æ–º–ø–ª–µ–∫—Å–∏</button></li>
                <li><button data-link="pvo.html">–ü—Ä–æ—Ç–∏–ø–æ–≤—ñ—Ç—Ä—è–Ω–∞ –æ–±–æ—Ä–æ–Ω–∞</button></li>
                <li><button data-link="uav.html">–ë–ø–õ–ê</button></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="menu-group-title">–î–æ–≤—ñ–¥–Ω–∏–∫</div>
            <ul>
                <li><button data-link="classification.html">–ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è</button></li>
                <li><button data-link="calibers.html">–ö–∞–ª—ñ–±—Ä–∏</button></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="menu-group-title">–¢–∞–∫—Ç–∏–∫–∞</div>
            <ul>
                <li><button data-link="tactics.html">–¢–∞–∫—Ç–∏—á–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è</button></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="menu-group-title">–£–∫—Ä–∞—ó–Ω—Å—å–∫—ñ —Ä–æ–∑—Ä–æ–±–∫–∏</div>
            <ul>
                <li><button data-link="ukraine-dev.html">–û–≥–ª—è–¥</button></li>
            </ul>
        </div>

        <div class="menu-group">
            <div class="menu-group-title">–ë–µ–∑–ø–µ–∫–∞</div>
            <ul>
                <li><button data-link="safety.html">–ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–ø–µ–∫–∏</button></li>
            </ul>
        </div>

    </div>
</div>

<section class="hero">
    <div class="hero-inner">
        <div class="hero-badge">‚Ä¢ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è ‚Ä¢ –±–æ—î–ø—Ä–∏–ø–∞—Å–∏ ‚Ä¢</div>
        <h1 class="hero-title">–ë–æ—î–ø—Ä–∏–ø–∞—Å–∏</h1>
        <p class="hero-sub">
            –°–Ω–∞—Ä—è–¥–∏, –º—ñ–Ω–∏, –ø–∞—Ç—Ä–æ–Ω–∏, —ñ–Ω–∂–µ–Ω–µ—Ä–Ω—ñ –∑–∞—Ä—è–¥–∏ —Ç–∞ —ñ–Ω—à—ñ –∑–∞—Å–æ–±–∏ —É—Ä–∞–∂–µ–Ω–Ω—è, –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ
            –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è –≤—Ä–∞–∂–µ–Ω–Ω—è –∂–∏–≤–æ—ó —Å–∏–ª–∏, —Ç–µ—Ö–Ω—ñ–∫–∏, —Å–ø–æ—Ä—É–¥ —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
            (–æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è, –¥–∏–º–æ–≤—ñ –∑–∞–≤—ñ—Å–∏, —ñ–Ω–∂–µ–Ω–µ—Ä–Ω—ñ —Ä–æ–±–æ—Ç–∏ —Ç–æ—â–æ).
        </p>

        <div class="search-box">
            <input id="searchInput" type="text" placeholder="–ü–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ –±–æ—î–ø—Ä–∏–ø–∞—Å—É..." />
            <div class="search-icon">üîç</div>
            <div id="searchDropdown" class="search-dropdown"></div>
            <div id="noResults" class="no-results">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</div>
        </div>
    </div>
</section>

<section class="page">
    <div id="weapons-grid" class="cards-grid"></div>
</section>

<footer>
    ¬© 2025 –ó–∞—Å–æ–±–∏ —É—Ä–∞–∂–µ–Ω–Ω—è ‚Ä¢ –ë–æ—î–ø—Ä–∏–ø–∞—Å–∏
</footer>

<script type="module">
    /* ========= HUD –ù–ê–í–Ü–ì–ê–¶–Ü–Ø ========= */
    const burger = document.getElementById('hudBurger');
    const menu   = document.getElementById('hudMenu');

    burger.addEventListener('click', () => {
        burger.classList.toggle('active');
        menu.classList.toggle('visible');
    });

    menu.querySelectorAll('button[data-link]').forEach(btn => {
        btn.addEventListener('click', () => {
            const link = btn.getAttribute('data-link');
            if (link) window.location.href = link;
        });
    });

    /* ========= FIREBASE ========= */
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import {
        getFirestore,
        collection,
        getDocs,
        query,
        orderBy
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDRSzMxpXUox4_pW4ruMXZsXw1Kppi_P8Y",
      authDomain: "rooot-71962.firebaseapp.com",
      projectId: "rooot-71962",
      storageBucket: "rooot-71962.firebasestorage.app",
      messagingSenderId: "718921321052",
      appId: "1:718921321052:web:614928382d93d2b50eb499"
    };

    const app = initializeApp(firebaseConfig);
    const db  = getFirestore(app);

    const TYPE_FILTER = "bp"; // üî• –¶–Ø –°–¢–û–†–Ü–ù–ö–ê ‚Äì —Ç—ñ–ª—å–∫–∏ –±–æ—î–ø—Ä–∏–ø–∞—Å–∏

    const container = document.getElementById("weapons-grid");

    function createCard(item) {
        const card = document.createElement("div");
        card.className = "weapon-card";

        card.innerHTML = `
            <img class="weapon-image" src="${item.img || ""}" alt="">
            <div class="weapon-body">
                <div class="weapon-name">${item.name || ""}</div>
            </div>
        `;

        card.addEventListener("click", () => openModal(item));
        return card;
    }

    async function loadWeapons() {
        try {
            const qW = query(collection(db, "weapons"), orderBy("name"));
            const snap = await getDocs(qW);
            const weapons = snap.docs.map(d => ({ id: d.id, ...d.data() }));

            const filtered = weapons.filter(w =>
                (w.type || "").toLowerCase() === TYPE_FILTER
            );

            container.innerHTML = "";
            filtered.forEach(item => {
                container.appendChild(createCard(item));
            });

            cacheCardsForSearch();

        } catch (e) {
            console.error("–ü–æ–º–∏–ª–∫–∞ Firestore:", e);
        }
    }

    /* ========= –ú–û–î–ê–õ–ö–ê ========= */
    const modal      = document.getElementById("weaponModal");
    const modalImg   = document.getElementById("modalImg");
    const modalName  = document.getElementById("modalName");
    const modalDesc  = document.getElementById("modalDesc");
    const modalSpecs = document.getElementById("modalSpecs");

    function openModal(item) {
        modalImg.src = item.img || "";
        modalName.textContent = item.name || "";
        modalDesc.textContent = item.desc || "";

        modalSpecs.innerHTML = "";
        if (Array.isArray(item.specs)) {
            item.specs.forEach(s => {
                const li = document.createElement("li");
                li.textContent = s;
                modalSpecs.appendChild(li);
            });
        }

        modal.classList.remove("hidden");
    }

    document.querySelector(".modal-close").addEventListener("click", () => {
        modal.classList.add("hidden");
    });

    modal.addEventListener("click", e => {
        if (e.target === modal) modal.classList.add("hidden");
    });

    /* ========= –ü–û–®–£–ö –ó –í–ò–ü–ê–î–ê–Æ–ß–ò–ú –°–ü–ò–°–ö–û–ú ========= */
    const searchInput = document.getElementById("searchInput");
    const dropdown    = document.getElementById("searchDropdown");
    const noResults   = document.getElementById("noResults");

    let cachedCards = [];

    function cacheCardsForSearch() {
        cachedCards = Array.from(document.querySelectorAll(".weapon-card")).map(card => ({
            element: card,
            name: card.querySelector(".weapon-name").innerText
        }));
    }

    searchInput.addEventListener("input", () => {
        const q = searchInput.value.toLowerCase().trim();

        dropdown.innerHTML = "";
        dropdown.style.display = "none";
        noResults.style.display = "none";

        if (q === "") return;

        const results = cachedCards.filter(item =>
            item.name.toLowerCase().includes(q)
        );

        if (results.length === 0) {
            noResults.style.display = "block";
            return;
        }

        dropdown.style.display = "block";

        results.slice(0, 12).forEach(item => {
            const div = document.createElement("div");
            div.className = "search-item";

            const highlighted = item.name.replace(
                new RegExp(q, "gi"),
                match => `<mark>${match}</mark>`
            );

            div.innerHTML = highlighted;

            div.addEventListener("click", () => {
                dropdown.style.display = "none";
                searchInput.value = item.name;

                item.element.scrollIntoView({
                    behavior: "smooth",
                    block: "center"
                });

                item.element.style.boxShadow = "0 0 25px rgba(255,39,39,1)";
                setTimeout(() => item.element.style.boxShadow = "", 900);
            });

            dropdown.appendChild(div);
        });
    });

    document.addEventListener("click", e => {
        if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.style.display = "none";
        }
    });

    // –°—Ç–∞—Ä—Ç
    loadWeapons();
/* ========= –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î ========= */
const backBtn = document.getElementById("backBtn");

backBtn.addEventListener("click", () => {
    if (document.referrer && document.referrer !== location.href) {
        history.back();
    } else {
        window.location.href = "index.html"; // –Ø–∫—â–æ –Ω–µ–º–∞—î —ñ—Å—Ç–æ—Ä—ñ—ó
    }
});

</script>

</body>
</html>
